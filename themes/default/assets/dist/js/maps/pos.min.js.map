{"version":3,"sources":["pos.js"],"names":["add_invoice_item","item","count","spositems","item_id","Settings","item_addition","id","row","qty","parseFloat","store","JSON","stringify","loadItems","get","total","an","product_tax","invoice_tax","product_discount","order_discount","total_discount","$","empty","time","Date","getTime","remote_printing","ob_info","pos_customer","text","hr","val","user","username","pos_curr_time","date","dateformat","timeformat","order_data","info","bill_data","o_items","b_items","style","pos_head","site_name","prepend","lang","order","bill","parse","sortable","push","sort","a","b","each","this","product_id","item_type","type","item_tax_method","tax_method","combo_items","item_qty","item_aqty","quantity","item_ds","discount","item_code","code","item_name","name","replace","net_price","real_unit_price","item_comment","comment","ds","item_discount","formatDecimal","indexOf","pds","split","isNaN","pr_tax","tax","pr_tax_val","inclusiveTax","inclusive","exlusiveTax","exclusive","row_no","newTr","tr_html","formatMoney","html","prependTo","oitb","scrollHeight","slimScroll","scrollTo","addClass","find","removeClass","comments","i","len","length","printLine","bprTr","oprTr","append","ts","order_tax","pts","g_total","grand_total","items","b_totals","rounding","round_total","roundNumber","parseInt","total_payable","total_items","totals","bill_totals","merchant_copy","display_kb","display_keyboards","focus","chr","String","fromCharCode","jQuery","browser","mobile","keyboard","autoAccept","alwaysOpen","openOn","usePreview","layout","display","bksp","accept","default","meta1","meta2","customLayout","shift","restrictInput","preventPaste","calTax","nav_pointer","pp","p_page","attr","pro_limit","tcp","Popup","data","print","show","createWin","Promise","resolve","d","assets","mywindow","window","open","document","write","setTimeout","posScreen","wh","height","total_dh","buttons_dh","items_dh","list_table_dh","outerHeight","str","size","char_per_line","res","newd","read_card","ready","on","e","preventDefault","stopPropagation","hideseek","nodata","no_match_found","n","modal","closest","item_rid","unit_price","base_url","label","row_id","backdrop","price","is_valid_discount","bootbox","alert","unexpected_value","localStorage","setItem","is_numeric","new_qty","click","protect_delete","dialog","title","enter_pin_code","closeButton","message","buttons","danger","close","className","callback","success","delete","md5","pin_code","remove","location","href","wrong_pin","keypress","keyCode","trigger","confirm","r_u_sure","result","please_add_product","print_img","element","html2canvas","scrollY","scale","then","canvas","img","toDataURL","post","spos_token","csrf_hash","form","serialize","printOrder","hide","printBill","apply_to","dval","focusToEnd","tval","ajax","url","dataType","cid","cat_id","category_id","products","per_page","autocomplete","source","minLength","autoFocus","delay","response","event","ui","content","_trigger","select","bind","inputmask","placeholder","no","generateCardNo","parent","children","gccode","gcname","gcvalue","gcprice","gcexpiry","file_required_fields","gc_data","Array","gcdata","hasOwnProperty","ref","type_reference_note","suspend","sid","appendTo","submit","gtotal","change","total_paying","total_paid","console","log","target","which","p_val","rounded_total","slideDown","slideUp","cn","async","balance","incorrect_gift_card","card_no","value","paying","$quick_cash","amt","contents","filter","nodeType","$pi","note_count","spos_note","spos_customer","select2","hover","top","offset","menu","hasClass","quantityFormat","hold_ref","status","msg","error","customer_request_failed","start","width","extend","keyaction","enter","base","$el","is","insertText","TrackData","p","SwipeParserObj","hasTrack1","CardType","ccn1","account","charAt","account_name","exp_month","exp_year","blur","removeData","clear","reload","focus_add_item","shortcut","add","propagate","add_customer","toggle_category_slider","cancel_sale","suspend_sale","print_order","print_bill","finalize_sale","today_sale","open_hold_bills","close_register","fn","v","ajaxSetup","cache","headers","cache-control"],"mappings":"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","file":"../pos.min.js","sourcesContent":["function add_invoice_item(item) {\n  if (count == 1) {\n    spositems = {};\n  }\n  if (item == null) {\n    return;\n  }\n\n  var item_id = Settings.item_addition == 1 ? item.item_id : item.id;\n  if (spositems[item_id]) {\n    spositems[item_id].id = item.id;\n    spositems[item_id].row.qty = parseFloat(spositems[item_id].row.qty) + parseFloat(item.row.qty || 1);\n  } else {\n    spositems[item_id] = item;\n  }\n\n  store('spositems', JSON.stringify(spositems));\n  loadItems();\n  return true;\n}\n\nfunction loadItems() {\n  if (count == 1) {\n    spositems = {};\n  }\n  if (get('spositems')) {\n    total = 0;\n    count = 1;\n    an = 1;\n    product_tax = 0;\n    invoice_tax = 0;\n    product_discount = 0;\n    order_discount = 0;\n    total_discount = 0;\n\n    $('#posTable tbody').empty();\n    var time = new Date().getTime() / 1000;\n    if (Settings.remote_printing != 1) {\n      var pos_customer = 'C: ' + $('#select2-spos_customer-container').text() + '\\n';\n      var hr = 'R: ' + $('#hold_ref').val() + '\\n';\n      var user = 'U: ' + username + '\\n';\n      var pos_curr_time = 'T: ' + date(Settings.dateformat + ' ' + Settings.timeformat, time) + '\\n';\n      var ob_info = pos_customer + hr + user + pos_curr_time + '\\n';\n      order_data.info = ob_info;\n      bill_data.info = ob_info;\n      var o_items = '';\n      var b_items = '';\n    } else {\n      $('#order_span').empty();\n      $('#bill_span').empty();\n      var style = '<style>.bb td, .bb th { border-bottom: 1px solid #DDD; }</style>';\n      var pos_head = '<span style=\"text-align:center;\"><h3>' + Settings.site_name + '</h3>';\n      // var pos_customer = ''; // remove this line and uncomment below to display customer\n      var pos_customer = '<h5>C: ' + $('#select2-spos_customer-container').text() + '</h5>';\n      var hr = '<h5>R: ' + $('#hold_ref').val() + '</h5>';\n      var user = '<h5>U: ' + username + '</h5>';\n      var pos_curr_time = '<h5>T: ' + date(Settings.dateformat + ' ' + Settings.timeformat, time) + '</h5>';\n      $('#order_span').prepend(style + pos_head + '<h4>' + lang.order + '</h4></span>' + pos_customer + hr + user + pos_curr_time);\n      $('#bill_span').prepend(style + pos_head + '<h4>' + lang.bill + '</h4></span>' + pos_customer + hr + user + pos_curr_time);\n      $('#order-table').empty();\n      $('#bill-table').empty();\n    }\n    spositems = JSON.parse(get('spositems'));\n\n    var sortable = [];\n    for (var id in spositems) {\n      sortable.push([spositems[id].id, spositems[id]]);\n    }\n    sortable.sort(function (a, b) {\n      return a[0] < b[0] ? -1 : a[0] > b[0] ? 1 : 0;\n    });\n    // sortable.reverse();\n\n    $.each(sortable, function () {\n      var item = this[1];\n      var item_id = Settings.item_addition == 1 ? item.item_id : item.id;\n      spositems[item_id] = item;\n\n      var product_id = item.row.id,\n        item_type = item.row.type,\n        item_tax_method = parseFloat(item.row.tax_method),\n        combo_items = item.combo_items,\n        item_qty = item.row.qty,\n        item_aqty = parseFloat(item.row.quantity),\n        item_type = item.row.type,\n        item_ds = item.row.discount,\n        item_code = item.row.code,\n        item_name = item.row.name.replace(/\"/g, '&#034;').replace(/'/g, '&#039;');\n      var unit_price = parseFloat(item.row.real_unit_price);\n      var net_price = unit_price;\n      var item_comment = item.row.comment;\n      // var item_was_ordered = item.row.ordered ? item.row.ordered : 0;\n      var item_was_ordered = 0;\n\n      var ds = item_ds ? item_ds : '0';\n      var item_discount = formatDecimal(ds);\n      if (ds.indexOf('%') !== -1) {\n        var pds = ds.split('%');\n        if (!isNaN(pds[0])) {\n          item_discount = formatDecimal(parseFloat((net_price * parseFloat(pds[0])) / 100), 4);\n        }\n      }\n      product_discount += formatDecimal(item_discount * item_qty, 4);\n      net_price = formatDecimal(net_price - item_discount, 4);\n\n      var pr_tax = parseFloat(item.row.tax),\n        pr_tax_val = 0;\n      if (pr_tax !== null && pr_tax != 0) {\n        if (item_tax_method == 0) {\n          pr_tax_val = inclusiveTax(net_price, pr_tax);\n          net_price -= pr_tax_val;\n          tax = lang.inclusive;\n        } else {\n          pr_tax_val = exlusiveTax(net_price, pr_tax);\n          tax = lang.exclusive;\n        }\n      }\n      product_tax += formatDecimal(pr_tax_val * item_qty, 4);\n\n      var row_no = new Date().getTime();\n      var newTr = $('<tr id=\"' + row_no + '\" class=\"' + item_id + '\" data-item-id=\"' + item_id + '\" data-id=\"' + item.row.id + '\"></tr>');\n      tr_html =\n        '<td><input name=\"product_id[]\" type=\"hidden\" class=\"rid\" value=\"' +\n        product_id +\n        '\"><input name=\"item_comment[]\" type=\"hidden\" class=\"ritem_comment\" value=\"' +\n        item_comment +\n        '\"><input name=\"product_code[]\" type=\"hidden\" value=\"' +\n        item.row.code +\n        '\"><input name=\"product_name[]\" type=\"hidden\" value=\"' +\n        item.row.name +\n        '\"><button type=\"button\" class=\"btn bg-purple btn-block btn-xs edit\" id=\"' +\n        row_no +\n        '\" data-item=\"' +\n        item_id +\n        '\"><span class=\"sname\" id=\"name_' +\n        row_no +\n        '\">' +\n        item_name +\n        ' (' +\n        item_code +\n        ')</span></button></td>';\n      // <input class=\"rprice\" name=\"net_price[]\" type=\"hidden\" id=\"price_' + row_no + '\" value=\"' + formatDecimal(item_price) + '\">\n      tr_html +=\n        '<td class=\"text-right\"><input class=\"realuprice\" name=\"real_unit_price[]\" type=\"hidden\" value=\"' +\n        item.row.real_unit_price +\n        '\"><input class=\"rdiscount\" name=\"product_discount[]\" type=\"hidden\" id=\"discount_' +\n        row_no +\n        '\" value=\"' +\n        ds +\n        '\"><span class=\"text-right sprice\" id=\"sprice_' +\n        row_no +\n        '\">' +\n        formatMoney(parseFloat(net_price) + parseFloat(pr_tax_val)) +\n        '</span></td>';\n      tr_html +=\n        '<td><input name=\"item_was_ordered[]\" type=\"hidden\" class=\"riwo\" value=\"' +\n        item_was_ordered +\n        '\"><input class=\"form-control input-qty kb-pad text-center rquantity\" name=\"quantity[]\" type=\"text\" value=\"' +\n        formatDecimal(item_qty) +\n        '\" data-id=\"' +\n        row_no +\n        '\" data-item=\"' +\n        item_id +\n        '\" id=\"quantity_' +\n        row_no +\n        '\" onClick=\"this.select();\"></td>';\n      tr_html +=\n        '<td class=\"text-right\"><span class=\"text-right ssubtotal\" id=\"subtotal_' +\n        row_no +\n        '\">' +\n        formatMoney((parseFloat(net_price) + parseFloat(pr_tax_val)) * parseFloat(item_qty)) +\n        '</span></td>';\n      tr_html += '<td class=\"text-center\"><i class=\"fa fa-trash-o tip pointer posdel\" id=\"' + row_no + '\" title=\"Remove\"></i></td>';\n      newTr.html(tr_html);\n      newTr.prependTo('#posTable');\n      total += formatDecimal((parseFloat(net_price) + parseFloat(pr_tax_val)) * parseFloat(item_qty), 4);\n      count += parseFloat(item_qty);\n      an++;\n      // $('#list-table-div').scrollTop(0);\n      var oitb = $('#list-table-div')[0].scrollHeight;\n      $('#list-table-div').slimScroll({ scrollTo: oitb });\n      if (item_type == 'standard' && item_qty > item_aqty) {\n        $('#' + row_no).addClass('danger');\n        $('#' + row_no)\n          .find('.edit')\n          .removeClass('bg-purple')\n          .addClass('btn-warning');\n      } else if (item_type == 'combo') {\n        if (combo_items === false) {\n          $('#' + row_no).addClass('danger');\n        } else {\n          $.each(combo_items, function () {\n            if (parseFloat(this.quantity) < parseFloat(this.qty) * item_qty) {\n              $('#' + row_no).addClass('danger');\n              $('#' + row_no)\n                .find('.edit')\n                .removeClass('bg-purple')\n                .addClass('btn-warning');\n            }\n          });\n        }\n      }\n\n      var comments = item_comment ? item_comment.split(/\\r?\\n/g) : [];\n      if (Settings.remote_printing != 1) {\n        b_items += '#' + (an - 1) + ' ' + item_name + ' (' + item_code + ')' + '\\n';\n        for (var i = 0, len = comments.length; i < len; i++) {\n          b_items += comments[i].length > 0 ? '   * ' + comments[i] + '\\n' : '';\n        }\n        b_items +=\n          printLine(\n            item_qty +\n              ' x ' +\n              formatMoney(parseFloat(net_price) + parseFloat(pr_tax_val)) +\n              ': ' +\n              formatMoney((parseFloat(net_price) + parseFloat(pr_tax_val)) * parseFloat(item_qty))\n          ) + '\\n';\n        o_items +=\n          printLine(\n            '#' + (an - 1) + ' ' + item_name + ' (' + item_code + '): [ ' + (item_was_ordered != 0 ? 'xxxx' : parseFloat(item_qty))\n          ) + ' ]\\n';\n        for (var i = 0, len = comments.length; i < len; i++) {\n          o_items += comments[i].length > 0 ? '   * ' + comments[i] + '\\n' : '';\n        }\n        o_items += '\\n';\n      } else {\n        var bprTr =\n          '<tr class=\"row_' +\n          item_id +\n          '\" data-item-id=\"' +\n          item_id +\n          '\"><td colspan=\"2\" style=\"border-bottom:0!important;\">#' +\n          (an - 1) +\n          ' ' +\n          (item_id == 0 ? item.row.name : item_name + ' (' + item_code + ')');\n        for (var i = 0, len = comments.length; i < len; i++) {\n          bprTr += comments[i] ? '<br> <b>*</b> <small>' + comments[i] + '</small>' : '';\n        }\n        bprTr += '</td></tr>';\n        bprTr +=\n          '<tr class=\"bb row_' +\n          item_id +\n          '\" data-item-id=\"' +\n          item_id +\n          '\"><td>(' +\n          item_qty +\n          ' x ' +\n          formatMoney(parseFloat(net_price) + parseFloat(pr_tax_val)) +\n          ')</td><td style=\"text-align:right;\">' +\n          formatMoney((parseFloat(net_price) + parseFloat(pr_tax_val)) * parseFloat(item_qty)) +\n          '</td></tr>';\n        var oprTr =\n          '<tr class=\"bb row_' + item_id + '\" data-item-id=\"' + item_id + '\"><td>#' + (an - 1) + ' ' + item_name + ' (' + item_code + ')';\n        for (var i = 0, len = comments.length; i < len; i++) {\n          oprTr += comments[i] ? '<br> <b>*</b> <small>' + comments[i] + '</small>' : '';\n        }\n        oprTr += '</td><td>[ ' + (item_was_ordered != 0 ? 'xxxx' : parseFloat(item_qty)) + ' ]</td></tr>';\n        $('#order-table').append(oprTr);\n        $('#bill-table').append(bprTr);\n      }\n    });\n\n    var ds = get('spos_discount') ? get('spos_discount') : $('#discount_val').val() ? $('#discount_val').val() : '0';\n    order_discount = parseFloat(ds);\n    if (ds.indexOf('%') !== -1) {\n      var pds = ds.split('%');\n      order_discount = parseFloat((total * parseFloat(pds[0])) / 100);\n    }\n\n    var ts = get('spos_tax') ? get('spos_tax') : $('#tax_val').val() ? $('#tax_val').val() : '0';\n    order_tax = parseFloat(ts);\n    if (ts.indexOf('%') !== -1) {\n      var pts = ts.split('%');\n      order_tax = ((total - order_discount) * parseFloat(pts[0])) / 100;\n    }\n\n    var g_total = total - parseFloat(order_discount) + parseFloat(order_tax);\n    grand_total = formatMoney(g_total);\n    $('#ds_con').text('(' + formatMoney(product_discount) + ') ' + formatMoney(order_discount));\n    $('#ts_con').text(formatMoney(order_tax));\n    $('#total-payable').text(grand_total);\n    $('#total').text(formatMoney(total));\n    $('#count').text(an - 1 + ' (' + formatMoney(count - 1) + ')');\n\n    if (Settings.remote_printing != 1) {\n      order_data.items = o_items;\n      bill_data.items = b_items;\n      var b_totals = '';\n      b_totals += printLine(lang.total + ': ' + formatMoney(total)) + '\\n';\n      if (order_discount > 0 || product_discount > 0) {\n        b_totals += printLine(lang.discount + ': ' + formatMoney(order_discount + product_discount)) + '\\n';\n      }\n      if (order_tax != 0) {\n        b_totals += printLine(lang.order_tax + ': ' + formatMoney(order_tax)) + '\\n';\n      }\n      b_totals += printLine(lang.grand_total + ': ' + formatMoney(g_total)) + '\\n';\n      if (Settings.rounding != 0) {\n        round_total = roundNumber(g_total, parseInt(Settings.rounding));\n        var rounding = formatDecimal(round_total - g_total, 4);\n        b_totals += printLine(lang.rounding + ': ' + formatMoney(rounding)) + '\\n';\n        b_totals += printLine(lang.total_payable + ': ' + formatMoney(round_total)) + '\\n';\n      }\n      b_totals += '\\n' + lang.total_items + ': ' + (an - 1) + ' (' + (parseFloat(count) - 1) + ')' + '\\n';\n      bill_data.totals = b_totals;\n    } else {\n      var bill_totals = '';\n      bill_totals +=\n        '<tr class=\"bb\"><td>' +\n        lang.total_items +\n        '</td><td style=\"text-align:right;\">' +\n        (an - 1) +\n        ' (' +\n        (parseFloat(count) - 1) +\n        ')</td></tr>';\n      bill_totals += '<tr class=\"bb\"><td>' + lang.total + '</td><td style=\"text-align:right;\">' + formatMoney(total) + '</td></tr>';\n      if (order_discount > 0 || product_discount > 0) {\n        bill_totals +=\n          '<tr class=\"bb\"><td>' +\n          lang.discount +\n          '</td><td style=\"text-align:right;\">' +\n          formatMoney(order_discount + product_discount) +\n          '</td></tr>';\n      }\n      if (order_tax != 0) {\n        bill_totals +=\n          '<tr class=\"bb\"><td>' + lang.order_tax + '</td><td style=\"text-align:right;\">' + formatMoney(order_tax) + '</td></tr>';\n      }\n      bill_totals += '<tr class=\"bb\"><td>' + lang.grand_total + '</td><td style=\"text-align:right;\">' + formatMoney(g_total) + '</td></tr>';\n      if (Settings.rounding != 0) {\n        round_total = roundNumber(g_total, parseInt(Settings.rounding));\n        var rounding = formatDecimal(round_total - g_total, 4);\n        bill_totals += '<tr class=\"bb\"><td>' + lang.rounding + '</td><td style=\"text-align:right;\">' + formatMoney(rounding) + '</td></tr>';\n        bill_totals += '<tr><td>' + lang.total_payable + '</td><td style=\"text-align:right;\">' + formatMoney(round_total) + '</td></tr>';\n      }\n      bill_totals += '<tr><td colspan=\"2\" style=\"text-align:center;\">' + lang.merchant_copy + '</td></tr>';\n      $('#bill-total-table').empty();\n      $('#bill-total-table').append(bill_totals);\n    }\n\n    if (Settings.display_kb == 1) {\n      display_keyboards();\n    }\n    $('#add_item').focus();\n  }\n}\n\nfunction chr(i) {\n  return String.fromCharCode(i);\n}\n\n$(document).ready(function () {\n  $(document).on('click', '.no-results, #filter-suspended-sales', function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  });\n\n  $('#susModal').on('shown.bs.modal', function (e) {\n    $('#reference_note').focus();\n  });\n\n  $('#filter-categories').hideseek({\n    nodata: lang.no_match_found,\n  });\n\n  $(document).on('click', '.suspended_sales .dropdown-menu .header', function (e) {\n    e.stopPropagation();\n  });\n\n  $('#filter-suspended-sales').hideseek({\n    nodata: lang.no_match_found,\n  });\n\n  $('#suspended_sales').on('shown.bs.dropdown', function () {\n    $('#filter-suspended-sales').focus();\n  });\n\n  $(document).on('click', '#update-note', function () {\n    var n = $('#snote').val();\n    store('spos_note', n);\n    $('#note').val(n);\n    $('#noteModal').modal('hide');\n  });\n  /* =============================\n    Edit Item Modal\n    ============================= */\n\n  $('#posTable').on('click', '.edit', function () {\n    var row = $(this).closest('tr');\n    var id = row.attr('id');\n    var item_id = row.attr('data-item-id');\n    var item_rid = row.attr('data-id');\n    var item = spositems[item_id];\n    //var unit_price = parseFloat(item.row.real_unit_price);\n    var unit_price = formatDecimal(row.find('.realuprice').val());\n    var net_price = unit_price;\n    var ds = item.row.discount ? item.row.discount : '0';\n    item_discount = formatDecimal(parseFloat(ds));\n    if (ds.indexOf('%') !== -1) {\n      var pds = ds.split('%');\n      if (!isNaN(pds[0])) {\n        item_discount = formatDecimal((net_price * parseFloat(pds[0])) / 100);\n      }\n    }\n    net_price -= item_discount;\n    var pr_tax = parseFloat(item.row.tax),\n      pr_tax_val = 0,\n      tax = '';\n    if (pr_tax !== null && pr_tax != 0) {\n      if (parseFloat(item.row.tax_method) == 0) {\n        pr_tax_val = formatDecimal((net_price * parseFloat(pr_tax)) / (100 + parseFloat(pr_tax)));\n        net_price -= pr_tax_val;\n        tax = lang.inclusive;\n      } else {\n        pr_tax_val = formatDecimal((net_price * parseFloat(pr_tax)) / 100);\n        tax = lang.exclusive;\n      }\n    }\n\n    $('#proModalLabel').html('<a href=\"' + base_url + '/products/view/' + item_rid + '\" data-toggle=\"ajax\">' + item.label + '</a>');\n    $('#net_price').text(formatMoney(net_price));\n    $('#pro_tax').text(formatMoney(pr_tax_val));\n    $('#pro_tax_method').text('(' + tax + ')');\n    $('#row_id').val(row_id);\n    $('#item_id').val(item_id);\n    $('#nPrice').val(unit_price);\n    $('#nQuantity').val(item.row.qty);\n    $('#nDiscount').val(ds);\n    $('#nComment').val(item.row.comment);\n    $('#proModal').modal({ backdrop: 'static' });\n  });\n\n  $(document).on('change', '#nPrice, #nDiscount', function () {\n    var item_id = $('#item_id').val();\n    var unit_price = parseFloat($('#nPrice').val());\n    var net_price = unit_price;\n    var item = spositems[item_id];\n    var ds = $('#nDiscount').val() ? $('#nDiscount').val() : '0';\n    item_discount = formatDecimal(parseFloat(ds));\n    if (ds.indexOf('%') !== -1) {\n      var pds = ds.split('%');\n      if (!isNaN(pds[0])) {\n        item_discount = formatDecimal((unit_price * parseFloat(pds[0])) / 100);\n      }\n    }\n    net_price -= item_discount;\n    var pr_tax = parseFloat(item.row.tax),\n      pr_tax_val = 0;\n    if (pr_tax !== null && pr_tax != 0) {\n      if (parseFloat(item.row.tax_method) == 0) {\n        pr_tax_val = formatDecimal((net_price * parseFloat(pr_tax)) / (100 + parseFloat(pr_tax)));\n        net_price -= pr_tax_val;\n        tax = lang.inclusive;\n      } else {\n        pr_tax_val = formatDecimal((net_price * parseFloat(pr_tax)) / 100);\n        tax = lang.exclusive;\n      }\n    }\n\n    $('#net_price').text(formatMoney(net_price));\n    $('#pro_tax').text(formatMoney(pr_tax_val));\n  });\n\n  /* =============================\n    Edit Item Method\n    ============================= */\n  $(document).on('click', '#editItem', function () {\n    var item_id = $('#item_id').val();\n    var price = parseFloat($('#nPrice').val());\n    if (!is_valid_discount($('#nDiscount').val())) {\n      bootbox.alert(lang.unexpected_value);\n      return false;\n    }\n    (spositems[item_id].row.qty = parseFloat($('#nQuantity').val())),\n      (spositems[item_id].row.real_unit_price = price),\n      (spositems[item_id].row.comment = $('#nComment').val()),\n      (spositems[item_id].row.discount = $('#nDiscount').val() ? $('#nDiscount').val() : '0'),\n      localStorage.setItem('spositems', JSON.stringify(spositems));\n    $('#proModal').modal('hide');\n\n    loadItems();\n    return;\n  });\n\n  /* =============================\n    Row quantity change\n    ============================= */\n  $(document).on('change', '.rquantity', function () {\n    var row = $(this).closest('tr');\n    if (!is_numeric($(this).val()) || $(this).val() == 0) {\n      loadItems();\n      bootbox.alert(lang.unexpected_value);\n      return false;\n    }\n    var new_qty = parseFloat($(this).val()),\n      item_id = row.attr('data-item-id');\n    spositems[item_id].row.qty = new_qty;\n    localStorage.setItem('spositems', JSON.stringify(spositems));\n    loadItems();\n  });\n\n  $('#reset').click(function (e) {\n    if (count <= 1) {\n      return false;\n    }\n    if (protect_delete == 1) {\n      var boxd = bootbox.dialog({\n        title: lang.enter_pin_code,\n        closeButton: true,\n        message: '<input id=\"pos_pin\" name=\"pos_pin\" type=\"password\" placeholder=\"Pin Code\" class=\"form-control kb-pad\"> ',\n        buttons: {\n          danger: {\n            label: lang.close,\n            className: 'btn-default pull-left',\n            callback: function () {},\n          },\n          success: {\n            label: \"<i class='fa fa-tick'></i> \" + lang.delete,\n            className: 'btn-warning verify_pin',\n            callback: function () {\n              var pos_pin = md5($('#pos_pin').val());\n              if (pos_pin == Settings.pin_code) {\n                if (get('spositems')) {\n                  remove('spositems');\n                }\n                if (get('spos_tax')) {\n                  remove('spos_tax');\n                }\n                if (get('spos_discount')) {\n                  remove('spos_discount');\n                }\n                if (get('spos_customer')) {\n                  remove('spos_customer');\n                }\n                window.location.href = base_url + 'pos';\n              } else {\n                bootbox.alert(lang.wrong_pin);\n              }\n            },\n          },\n        },\n      });\n      boxd.on('shown.bs.modal', function () {\n        if (Settings.display_kb == 1) {\n          display_keyboards();\n        }\n        $('#pos_pin')\n          .focus()\n          .keypress(function (e) {\n            if (e.keyCode == 13) {\n              e.preventDefault();\n              $('.verify_pin').trigger('click');\n              return false;\n            }\n          });\n      });\n    } else {\n      bootbox.confirm(lang.r_u_sure, function (result) {\n        if (result) {\n          if (get('spositems')) {\n            remove('spositems');\n          }\n          if (get('spos_tax')) {\n            remove('spos_tax');\n          }\n          if (get('spos_discount')) {\n            remove('spos_discount');\n          }\n          if (get('spos_customer')) {\n            remove('spos_customer');\n          }\n          window.location.href = base_url + 'pos';\n        }\n      });\n    }\n  });\n\n  $('#print_order').click(function (e) {\n    e.preventDefault();\n    if (count <= 1) {\n      bootbox.alert(lang.please_add_product);\n    } else {\n      if (Settings.remote_printing == 0) {\n        $('#order-data').show();\n        if (Settings.print_img == 1) {\n          $('#preo').html(\n            '<pre style=\"background:#FFF;font-size:18px;margin:0;border:0;color:#000 !important;\">' +\n              order_data.info +\n              order_data.items +\n              '</pre>'\n          );\n          var element = $('#order-data').get(0);\n          html2canvas(element, { scrollY: 0, scale: 1.3 }).then(function (canvas) {\n            var img = canvas.toDataURL().split(',')[1];\n            $.post(base_url + 'pos/receipt_img', {\n              img: img,\n              spos_token: csrf_hash,\n            });\n            // return Canvas2Image.saveAsPNG(canvas);\n          });\n        } else {\n          var form = $('#pos-sale-form').serialize();\n          $.post(base_url + 'pos/p/order', form);\n        }\n      } else {\n        printOrder(order_data);\n      }\n    }\n    setTimeout(function () {\n      $('#order-data').hide();\n    }, 500);\n    return false;\n  });\n\n  $('#print_bill').click(function (e) {\n    e.preventDefault();\n    if (count <= 1) {\n      bootbox.alert(lang.please_add_product);\n    } else {\n      if (Settings.remote_printing == 0) {\n        $('#bill-data').show();\n        if (Settings.print_img == 1) {\n          $('#preb').html(\n            '<pre style=\"background:#FFF;font-size:18px;margin:0;border:0;color:#000 !important;\">' +\n              bill_data.info +\n              bill_data.items +\n              '\\n' +\n              bill_data.totals +\n              '</pre>'\n          );\n          var element = $('#bill-data').get(0);\n          html2canvas(element, { scrollY: 0, scale: 1.3 }).then(function (canvas) {\n            var img = canvas.toDataURL().split(',')[1];\n            $.post(base_url + 'pos/receipt_img', {\n              img: img,\n              spos_token: csrf_hash,\n            });\n            // return Canvas2Image.saveAsPNG(canvas);\n          });\n        } else {\n          var form = $('#pos-sale-form').serialize();\n          $.post(base_url + 'pos/p/bill', form);\n        }\n      } else {\n        printBill(bill_data);\n      }\n    }\n    setTimeout(function () {\n      $('#bill-data').hide();\n    }, 500);\n    return false;\n  });\n\n  $('#updateDiscount').click(function () {\n    var ds = $('#get_ds').val() ? $('#get_ds').val() : '0';\n    var apply_to = $('input[name=apply_to]:checked').val();\n    if (ds.length != 0) {\n      if (apply_to == 'order') {\n        $('#discount_val').val(ds);\n        store('spos_discount', ds);\n        if (ds.indexOf('%') !== -1) {\n          var pds = ds.split('%');\n\n          order_discount = (total * parseFloat(pds[0])) / 100;\n          order_tax = calTax();\n          var g_total = total + order_tax - order_discount;\n          grand_total = parseFloat(g_total);\n          $('#ds_con').text('(' + formatMoney(product_discount) + ') ' + formatMoney(order_discount));\n          $('#total-payable').text(formatMoney(grand_total));\n        } else {\n          order_discount = ds;\n          order_tax = calTax();\n          var g_total = total + order_tax - parseFloat(order_discount);\n          grand_total = parseFloat(g_total);\n          $('#ds_con').text('(' + formatMoney(product_discount) + ') ' + formatMoney(order_discount));\n          $('#total-payable').text(formatMoney(grand_total));\n        }\n      } else if (apply_to == 'products') {\n        var items = {};\n        spositems = JSON.parse(get('spositems'));\n        $.each(spositems, function () {\n          this.row.discount = ds;\n        });\n        store('spositems', JSON.stringify(spositems));\n      }\n      loadItems();\n      $('#dsModal').modal('hide');\n    }\n  });\n\n  $('#add_discount').click(function () {\n    var dval = $('#discount_val').val();\n    $('#get_ds').val(dval);\n    $('#dsModal').modal({ backdrop: 'static' });\n    return false;\n  });\n  $('#dsModal').on('shown.bs.modal', function () {\n    $('#get_ds').focusToEnd();\n  });\n\n  $('#updateTax').click(function () {\n    var ts = $('#get_ts').val();\n    order_tax = 0;\n    if (ts.length != 0) {\n      $('#tax_val').val(ts);\n      store('spos_tax', ts);\n      if (ts.indexOf('%') !== -1) {\n        var pts = ts.split('%');\n        if (!isNaN(pts[0])) {\n          order_tax = ((total - order_discount) * parseFloat(pts[0])) / 100;\n          var g_total = total + order_tax - order_discount;\n          grand_total = parseFloat(g_total);\n          $('#ts_con').text(formatMoney(order_tax));\n          $('#total-payable').text(formatMoney(grand_total));\n        } else {\n          $('#get_ts').val('0');\n          $('#tax_val').val('0');\n          var g_total = total - order_discount;\n          grand_total = parseFloat(g_total);\n          $('#ts_con').text('0');\n          $('#total-payable').text(formatMoney(grand_total));\n        }\n      } else {\n        if (!isNaN(ts) && ts != 0) {\n          order_tax = ts;\n          var g_total = total + parseFloat(ts) - order_discount;\n          grand_total = parseFloat(g_total);\n          $('#ts_con').text(formatMoney(order_tax));\n          $('#total-payable').text(formatMoney(grand_total));\n        } else {\n          $('#get_ts').val('0');\n          $('#tax_val').val('0');\n          var g_total = total - order_discount;\n          grand_total = parseFloat(g_total);\n          $('#ts_con').text('0');\n          $('#total-payable').text(formatMoney(grand_total));\n        }\n      }\n      $('#tsModal').modal('hide');\n    }\n  });\n\n  $('#add_tax').click(function () {\n    var tval = $('#tax_val').val();\n    $('#get_ts').val(tval);\n    $('#tsModal').modal({ backdrop: 'static' });\n    return false;\n  });\n  $('#tsModal').on('shown.bs.modal', function () {\n    $('#get_ts').focusToEnd();\n  });\n  $('#noteModal').on('shown.bs.modal', function () {\n    $('#snote').focusToEnd();\n  });\n\n  $(document).on('click', '.product', function (e) {\n    code = $(this).val();\n    $.ajax({\n      type: 'get',\n      url: base_url + 'pos/get_product/' + code,\n      dataType: 'json',\n      success: function (data) {\n        if (data !== null) {\n          add_invoice_item(data);\n        } else {\n          bootbox.alert(lang.no_match_found);\n        }\n      },\n    });\n  });\n\n  $(document).on('click', '.category', function () {\n    var cid = $(this).attr('id');\n    if (cat_id != cid) {\n      cat_id = cid;\n      $.ajax({\n        type: 'get',\n        url: base_url + 'pos/ajaxproducts',\n        data: { category_id: cat_id, tcp: 1 },\n        dataType: 'json',\n        success: function (data) {\n          p_page = 'n';\n          // $('#categories-list').addClass('control-sidebar-open');\n          //ocat_id = cat_id;\n          tcp = data.tcp;\n          $('.items').html(data.products);\n          $('.category').removeClass('active');\n          $('#' + cat_id).addClass('active');\n          nav_pointer();\n        },\n      });\n    }\n    return false;\n  });\n  $('#category-' + cat_id).addClass('active');\n\n  $('#next').click(function () {\n    if (p_page == 'n') {\n      p_page = 0;\n    }\n    p_page += pro_limit;\n    if (tcp >= pro_limit && p_page < tcp) {\n      $.ajax({\n        type: 'get',\n        url: base_url + 'pos/ajaxproducts',\n        data: { category_id: cat_id, per_page: p_page },\n        dataType: 'html',\n        success: function (data) {\n          $('.items').html(data);\n          nav_pointer();\n        },\n      });\n    } else {\n      p_page -= pro_limit;\n    }\n  });\n\n  $('#previous').click(function () {\n    if (p_page == 'n') {\n      p_page = 0;\n    }\n    if (p_page != 0) {\n      p_page -= pro_limit;\n      if (p_page == 0) {\n        p_page = 'n';\n      }\n      $.ajax({\n        type: 'get',\n        url: base_url + 'pos/ajaxproducts',\n        data: { category_id: cat_id, per_page: p_page },\n        dataType: 'html',\n        success: function (data) {\n          $('.items').html(data);\n          nav_pointer();\n        },\n      });\n    }\n  });\n\n  $('#add_item').autocomplete({\n    source: base_url + 'pos/suggestions',\n    minLength: 1,\n    autoFocus: false,\n    delay: 200,\n    response: function (event, ui) {\n      if ($(this).val().length >= 16 && ui.content[0] && ui.content[0].id == 0) {\n        bootbox.alert(lang.no_match_found, function () {\n          $('#add_item').focus();\n        });\n        $(this).val('');\n      } else if (ui.content.length == 1 && ui.content[0] && ui.content[0].id != 0) {\n        ui.item = ui.content[0];\n        $(this).data('ui-autocomplete')._trigger('select', 'autocompleteselect', ui);\n        $(this).autocomplete('close');\n      } else if (ui.content.length == 1 && ui.content[0] && ui.content[0].id == 0) {\n        bootbox.alert(lang.no_match_found, function () {\n          $('#add_item').focus();\n        });\n        $(this).val('');\n      }\n    },\n    select: function (event, ui) {\n      event.preventDefault();\n      if (ui.item.id !== 0) {\n        var row = add_invoice_item(ui.item);\n        if (row) $(this).val('');\n      } else {\n        bootbox.alert(lang.no_match_found);\n      }\n    },\n  });\n\n  $('#add_item').bind('keypress', function (e) {\n    if (e.keyCode == 13) {\n      e.preventDefault();\n      $(this).autocomplete('search');\n    }\n  });\n\n  $('#add_item').focus();\n  $('#gccard_no').inputmask('9999 9999 9999 9999');\n  $('#gift_card_no').inputmask('9999 9999 9999 9999');\n  $('#gcexpiry').inputmask('yyyy-mm-dd', { placeholder: 'yyyy-mm-dd' });\n  $('#genNo').click(function () {\n    var no = generateCardNo();\n    $(this).parent().parent('.input-group').children('input').val(no);\n    return false;\n  });\n\n  $(document).on('click', '#sellGiftCard', function (e) {\n    if (count == 1) {\n      spositems = {};\n    }\n    $('#gcModal').modal({ backdrop: 'static' });\n  });\n\n  $(document).on('click', '#addGiftCard', function (e) {\n    var mid = 0,\n      gccode = $('#gccard_no').val(),\n      gcname = $('#gcname').val(),\n      gcvalue = $('#gcvalue').val(),\n      gcprice = parseFloat($('#gcprice').val());\n    gcexpiry = $('#gcexpiry').val();\n    if (gccode == '' || gcvalue == '' || gcprice == '' || gcvalue == 0 || gcprice == 0) {\n      $('#gcerror').text(lang.file_required_fields);\n      $('.gcerror-con').show();\n      return false;\n    }\n    var gc_data = new Array();\n    gc_data[0] = gccode;\n    gc_data[1] = gcvalue;\n    gc_data[2] = gcexpiry;\n\n    $.ajax({\n      type: 'get',\n      url: base_url + 'gift_cards/sell_gift_card',\n      dataType: 'json',\n      data: { gcdata: gc_data },\n      success: function (data) {\n        if (data.result === 'success') {\n          spositems[mid] = {\n            id: mid,\n            item_id: mid,\n            label: gcname + ' (' + gccode + ')',\n            row: {\n              id: mid,\n              code: gccode,\n              name: gcname,\n              quantity: 1,\n              price: gcprice,\n              real_unit_price: gcprice,\n              tax: 0,\n              qty: 1,\n              type: 'manual',\n              discount: '0',\n              comment: '',\n            },\n          };\n          store('spositems', JSON.stringify(spositems));\n          loadItems();\n          $('#gcModal').modal('hide');\n          $('#gccard_no').val('');\n          $('#gcvalue').val('');\n          $('#gcprice').val('');\n        } else {\n          $('#gcerror').text(data.message);\n          $('.gcerror-con').show();\n        }\n      },\n    });\n  });\n\n  // $('#opModal').bind().on('click', 'a', function(){\n  //     var pg = $.url($(this).attr(\"href\")).param(\"per_page\");\n  //     $.get( base_url+'pos/ob_page&per_page='+pg, function( data ) {\n  //         $( \".html_con\" ).html( data.pd );\n  //         $( \".page_con\" ).html( data.page );\n  //     }, \"json\");\n\n  //     return false;\n  // });\n\n  var pwacc = false;\n  $(document).on('click', '.posdel', function () {\n    var row = $(this).closest('tr');\n    var item_id = row.attr('data-item-id');\n    if (protect_delete == 1) {\n      var boxd = bootbox.dialog({\n        title: lang.enter_pin_code,\n        closeButton: true,\n        message: '<input id=\"pos_pin\" name=\"pos_pin\" type=\"password\" placeholder=\"Pin Code\" class=\"form-control kb-pad\"> ',\n        buttons: {\n          danger: {\n            label: lang.close,\n            className: 'btn-default pull-left',\n            callback: function () {},\n          },\n          success: {\n            label: \"<i class='fa fa-tick'></i> \" + lang.delete,\n            className: 'btn-warning verify_pin',\n            callback: function () {\n              var pos_pin = md5($('#pos_pin').val());\n              if (pos_pin == Settings.pin_code) {\n                delete spositems[item_id];\n                row.remove();\n                if (spositems.hasOwnProperty(item_id)) {\n                } else {\n                  localStorage.setItem('spositems', JSON.stringify(spositems));\n                  loadItems();\n                }\n              } else {\n                bootbox.alert(lang.wrong_pin);\n              }\n            },\n          },\n        },\n      });\n      boxd.on('shown.bs.modal', function () {\n        if (Settings.display_kb == 1) {\n          display_keyboards();\n        }\n        $('#pos_pin')\n          .focus()\n          .keypress(function (e) {\n            if (e.keyCode == 13) {\n              e.preventDefault();\n              $('.verify_pin').trigger('click');\n              return false;\n            }\n          });\n      });\n    } else {\n      delete spositems[item_id];\n      row.remove();\n      if (spositems.hasOwnProperty(item_id)) {\n      } else {\n        localStorage.setItem('spositems', JSON.stringify(spositems));\n        loadItems();\n      }\n    }\n    return false;\n  });\n\n  $('#suspend').click(function () {\n    if (count <= 1) {\n      bootbox.alert(lang.please_add_product);\n      return false;\n    } else {\n      $('#susModal').modal({ backdrop: 'static' });\n    }\n  });\n\n  $('#suspend_sale').click(function () {\n    ref = $('#reference_note').val();\n    if (!ref || ref == '') {\n      bootbox.alert(lang.type_reference_note);\n      return false;\n    } else {\n      suspend = $('<span></span>');\n      if (sid !== 0) {\n        suspend.html(\n          '<input type=\"hidden\" name=\"delete_id\" value=\"' +\n            sid +\n            '\" /><input type=\"hidden\" name=\"suspend\" value=\"yes\" /><input type=\"hidden\" name=\"suspend_note\" value=\"' +\n            ref +\n            '\" />'\n        );\n      } else {\n        suspend.html('<input type=\"hidden\" name=\"suspend\" value=\"yes\" /><input type=\"hidden\" name=\"suspend_note\" value=\"' + ref + '\" />');\n      }\n      suspend.appendTo('#hidesuspend');\n      $('#pos-sale-form').submit();\n    }\n  });\n\n  $('#payment').click(function () {\n    if (count <= 1) {\n      bootbox.alert(lang.please_add_product);\n      return false;\n    } else {\n      if (sid) {\n        suspend = $('<span></span>');\n        suspend.html('<input type=\"hidden\" name=\"delete_id\" value=\"' + sid + '\" />');\n        suspend.appendTo('#hidesuspend');\n      }\n\n      gtotal = formatDecimal(total - order_discount + order_tax);\n      if (Settings.rounding != 0) {\n        round_total = roundNumber(gtotal, parseInt(Settings.rounding));\n        var rounding = formatDecimal(round_total - gtotal);\n        $('#twt').text(formatMoney(round_total) + ' (' + formatMoney(rounding) + ')');\n        $('#quick-payable').text(round_total);\n      } else {\n        $('#twt').text(formatMoney(gtotal));\n        $('#quick-payable').text(gtotal);\n      }\n      $('#item_count').text(an - 1 + ' (' + (count - 1) + ')');\n      $('#order_quantity').val(count - 1);\n      $('#order_items').val(an - 1);\n      $('#balance').text('0.00');\n      $('#payModal').modal({ backdrop: 'static' });\n    }\n  });\n  $('#payModal').on('shown.bs.modal', function (e) {\n    $('#amount').focus().val(0);\n    $('#quick-payable').click();\n  });\n  $('#payModal').on('hidden.bs.modal', function (e) {\n    $('#amount').val('').change();\n  });\n\n  $('#amount').change(function (e) {\n    var total_paying = $('.amount').val();\n    $('#total_paying').text(formatMoney(total_paying));\n    if (Settings.rounding != 0) {\n      $('#balance').text(formatMoney(total_paying - round_total));\n      $('#balance_val').val(formatDecimal(total_paying - round_total));\n      total_paid = total_paying;\n      grand_total = round_total;\n    } else {\n      $('#balance').text(formatMoney(total_paying - gtotal));\n      $('#balance_val').val(formatDecimal(total_paying - gtotal));\n      total_paid = total_paying;\n      grand_total = gtotal;\n    }\n  });\n\n  $('#add-customer').click(function () {\n    $('#customerModal').modal({ backdrop: 'static' });\n  });\n\n  $('#payModal').on('keypress', function (e) {\n    console.log(e.target.type);\n    if (e.which == 13 && e.target.type != 'textarea') {\n      $('#submit-sale').focus();\n      setTimeout(function () {\n        $('#submit-sale').click();\n      }, 250);\n    }\n  });\n\n  $('#payModal').on('change', '#paid_by', function () {\n    $('#clear-cash-notes').click();\n    $('#amount').val(grand_total);\n    var p_val = $(this).val();\n    $('#paid_by_val').val(p_val);\n    var gtotal = formatDecimal(total - order_discount + order_tax);\n    if (Settings.rounding != 0) {\n      var rounded_total = formatDecimal(roundNumber(gtotal, parseInt(Settings.rounding)));\n    } else {\n      var rounded_total = formatDecimal(gtotal);\n    }\n    $('#rpaidby').val(p_val);\n    if (p_val == 'gift_card') {\n      $('.gc').slideDown();\n      $('.ngc').slideUp('fast');\n      setTimeout(function () {\n        $('#gift_card_no').focus();\n      }, 10);\n      $('#amount').attr('readonly', true);\n    } else {\n      $('.ngc').slideDown();\n      $('.gc').slideUp('fast');\n      $('#gc_details').html('');\n      $('#amount').attr('readonly', false);\n    }\n    if (p_val == 'cash' || p_val == 'other') {\n      $('.pcash').slideDown();\n      $('.pcheque').slideUp('fast');\n      $('.pcc').slideUp('fast');\n      setTimeout(function () {\n        $('#amount').focus();\n      }, 10);\n    } else if (p_val == 'CC' || p_val == 'stripe') {\n      $('.pcc').slideDown();\n      $('.pcheque').slideUp('fast');\n      $('.pcash').slideUp('fast');\n      $('#amount').val(rounded_total);\n      setTimeout(function () {\n        $('#swipe').val('').focus();\n      }, 10);\n    } else if (p_val == 'cheque') {\n      $('.pcheque').slideDown();\n      $('.pcc').slideUp('fast');\n      $('.pcash').slideUp('fast');\n      $('#amount').val(rounded_total);\n      setTimeout(function () {\n        $('#cheque_no').focus();\n      }, 10);\n    } else {\n      $('.pcheque').hide();\n      $('.pcc').hide();\n      $('.pcash').hide();\n    }\n  });\n\n  $(document).on('change', '.gift_card_no', function () {\n    var cn = $(this).val() ? $(this).val() : '';\n    if (cn != '') {\n      $.ajax({\n        type: 'get',\n        async: false,\n        url: base_url + 'pos/validate_gift_card/' + cn,\n        dataType: 'json',\n        success: function (data) {\n          if (data === false || data.balance < 0) {\n            $('#gift_card_no').parent('.form-group').addClass('has-error');\n            bootbox.alert(lang.incorrect_gift_card);\n          } else {\n            $('#gc_details').html(\n              lang.card_no + ': ' + data.card_no + '<br>' + lang.value + ': ' + data.value + ' - ' + lang.balance + ': ' + data.balance\n            );\n            $('#gift_card_no').parent('.form-group').removeClass('has-error');\n            var paying = gtotal > data.balance ? data.balance : gtotal;\n            $('#amount_val').val(paying);\n            $('#amount').val(paying);\n          }\n        },\n      });\n    }\n    return false;\n  });\n\n  $(document).on('click', '#quick-payable', function () {\n    $('#clear-cash-notes').click();\n    $(this).append('<span class=\"badge\">1</span>');\n    $('#amount').val(grand_total);\n  });\n\n  $(document).on('click', '.quick-cash', function () {\n    if ($('#quick-payable').find('span.badge').length) {\n      $('#clear-cash-notes').click();\n    }\n    var $quick_cash = $(this);\n    var amt = $quick_cash\n      .contents()\n      .filter(function () {\n        return this.nodeType == 3;\n      })\n      .text();\n    // var th = Settings.thousands_sep == 0 ? '' : Settings.thousands_sep;\n    var $pi = $('#amount');\n    // amt = formatDecimal(amt.split(th).join('')) * 1 + $pi.val() * 1;\n    amt = formatDecimal(amt) * 1 + $pi.val() * 1;\n    $pi.val(formatDecimal(amt)).change().focus();\n    var note_count = $quick_cash.find('span');\n    if (note_count.length == 0) {\n      $quick_cash.append('<span class=\"badge\">1</span>');\n    } else {\n      note_count.text(parseInt(note_count.text()) + 1);\n    }\n  });\n\n  $(document).on('click', '#clear-cash-notes', function () {\n    $('.quick-cash').find('.badge').remove();\n    $('#amount').val('').change().focus();\n  });\n\n  $('#payModal').on('change', '#amount, #paid_by', function (e) {\n    $('#amount_val').val($('#amount').val());\n  });\n  $('#payModal').on('blur', '#amount', function (e) {\n    $('#amount_val').val($('#amount').val());\n  });\n  $('#payModal').on('select2-close', '#paid_by', function (e) {\n    $('#paid_by_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_no', function (e) {\n    $('#cc_no_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_holder', function (e) {\n    $('#cc_holder_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#gift_card_no', function (e) {\n    $('#paying_gift_card_no_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_month', function (e) {\n    $('#cc_month_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_year', function (e) {\n    $('#cc_year_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_type', function (e) {\n    $('#cc_type_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#pcc_cvv2', function (e) {\n    $('#cc_cvv2_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#cheque_no', function (e) {\n    $('#cheque_no_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#payment_note', function (e) {\n    $('#payment_note_val').val($(this).val());\n  });\n  $('#payModal').on('change', '#note', function (e) {\n    var n = $(this).val();\n    store('spos_note', n);\n    $('#spos_note').val(n);\n  });\n  if ((spos_note = get('spos_note'))) {\n    $('#note').val(spos_note);\n    $('#snote').val(spos_note);\n  }\n  $('#spos_customer').change(function (e) {\n    store('spos_customer', $(this).val());\n  });\n  if ((spos_customer = get('spos_customer'))) {\n    $('#spos_customer').select2('val', spos_customer);\n  }\n\n  $('.treeview').hover(function (e) {\n    var wh = $(document).height();\n    var top = $(this).offset().top;\n    var menu = $(this).find('.treeview-menu');\n    var menuh = menu.height() + 44;\n    if (wh - top < menuh) {\n      $(this).find('a').children('span').addClass('popup');\n      menu.addClass('popup');\n    } else {\n      $(this).find('a').children('span').removeClass('popup');\n      menu.removeClass('popup');\n    }\n  });\n\n  $('body').click(function (e) {\n    if (!$(e.target).hasClass('sidebar-icon') && !$(e.target).hasClass('sb') && $('#categories-list').hasClass('control-sidebar-open')) {\n      $('#categories-list').removeClass('control-sidebar-open');\n    }\n  });\n\n  $('#submit-sale').click(function () {\n    $('#total_items').val(an - 1);\n    $('#total_quantity').val(quantityFormat(count - 1));\n    $('#submit').click();\n  });\n\n  var hold_ref = $('#hold_ref').val();\n  $('#hold_ref').change(function () {\n    hold_ref = $(this).val();\n    $('#reference_note').val(hold_ref);\n  });\n  $('#reference_note').change(function () {\n    hold_ref = $(this).val();\n    $('#hold_ref').val(hold_ref);\n  });\n\n  $('#suspend_sale').click(function () {\n    if ($('#reference_note').val()) {\n      $('#hold_ref').val($('#reference_note').val());\n      $('#total_items').val(an - 1);\n      $('#total_quantity').val(quantityFormat(count - 1));\n      $('#submit').click();\n    }\n    return false;\n  });\n\n  $('#customer-form').on('submit', function (e) {\n    e.preventDefault();\n    $.ajax({\n      type: 'post',\n      url: base_url + 'customers/add',\n      data: $(this).serialize(),\n      dataType: 'json',\n      success: function (res) {\n        if (res.status == 'success') {\n          $('#spos_customer').append($('<option></option>').attr('value', res.id).text(res.val));\n          $('#spos_customer').select2('val', res.id);\n          $('#customerModal').modal('hide');\n        } else {\n          $('#c-alert').html(res.msg);\n          $('#c-alert').show();\n        }\n      },\n      error: function () {\n        bootbox.alert(lang.customer_request_failed);\n        return false;\n      },\n    });\n    return false;\n  });\n\n  $('#customerModal').on('hidden.bs.modal', function (e) {\n    $('#c-alert').hide();\n    $('#cname').val('');\n    $('#cemail').val('');\n    $('#cphone').val('');\n    $('#cf1').val('');\n    $('#cf2').val('');\n  });\n});\n\nfunction display_keyboards() {\n  if (!jQuery.browser.mobile) {\n    $('.kb-text').keyboard({\n      autoAccept: true,\n      alwaysOpen: false,\n      openOn: 'focus',\n      usePreview: false,\n      // layout: 'qwerty',\n      layout: 'custom',\n      display: {\n        bksp: '\\u2190',\n        accept: 'return',\n        default: 'ABC',\n        meta1: '123',\n        meta2: '#+=',\n      },\n      customLayout: {\n        default: [\n          'q w e r t y u i o p {bksp}',\n          'a s d f g h j k l {enter}',\n          '{s} z x c v b n m , . {s}',\n          '{meta1} {space} {cancel} {accept}',\n        ],\n        shift: ['Q W E R T Y U I O P {bksp}', 'A S D F G H J K L {enter}', '{s} Z X C V B N M / ? {s}', '{meta1} {space} {meta1} {accept}'],\n        meta1: [\n          '1 2 3 4 5 6 7 8 9 0 {bksp}',\n          '- / : ; ( ) \\u20ac & @ {enter}',\n          '{meta2} . , ? ! \\' \" {meta2}',\n          '{default} {space} {default} {accept}',\n        ],\n        meta2: [\n          '[ ] { } # % ^ * + = {bksp}',\n          '_ \\\\ | &lt; &gt; $ \\u00a3 \\u00a5 {enter}',\n          '{meta1} ~ . , ? ! \\' \" {meta1}',\n          '{default} {space} {default} {accept}',\n        ],\n      },\n    });\n\n    $('.kb-pad').keyboard({\n      restrictInput: true,\n      preventPaste: true,\n      autoAccept: true,\n      alwaysOpen: false,\n      openOn: 'click',\n      usePreview: false,\n      layout: 'costom',\n      display: {\n        b: '\\u2190:Backspace',\n      },\n      customLayout: {\n        default: ['1 2 3 {b}', '4 5 6 . {clear}', '7 8 9 0 %', '{accept} {cancel}'],\n      },\n    });\n  }\n}\n\nfunction calTax() {\n  var ts = get('spos_tax') ? get('spos_tax') : $('#tax_val').val();\n  if (ts.indexOf('%') !== -1) {\n    var pts = ts.split('%');\n    order_tax = ((total - order_discount) * parseFloat(pts[0])) / 100;\n    $('#ts_con').text(formatMoney(order_tax));\n  } else {\n    order_tax = parseFloat(ts);\n    $('#ts_con').text(formatMoney(order_tax));\n  }\n  return order_tax;\n}\n\nfunction nav_pointer() {\n  var pp = p_page == 'n' ? 0 : p_page;\n  pp == 0 ? $('#previous').attr('disabled', true) : $('#previous').attr('disabled', false);\n  pp + pro_limit > tcp ? $('#next').attr('disabled', true) : $('#next').attr('disabled', false);\n}\n\n$(document).ready(function () {\n  $(document).on('click', '#print-modal-close', function (e) {\n    $('#printModal').hide();\n  });\n});\nfunction Popup(data, type) {\n  $('#print-title').text(lang.print + ' ' + lang[type]);\n  $('#print-body').html(data);\n  $('#printModal').show();\n  //   createWin(data).then(function (w) {\n  //     w.close();\n  //   });\n}\nfunction createWin(data) {\n  return new Promise(function (resolve) {\n    var d =\n      '<!DOCTYPE html><html><head><title>Print</title><link rel=\"stylesheet\" href=\"' +\n      assets +\n      'bootstrap/css/bootstrap.min.css\" type=\"text/css\" /></head><body>' +\n      data +\n      '<script type=\"text/javascript\">window.print();</script></body></html>';\n    var mywindow = window.open(d, 'spos_print', 'height=500,width=300');\n    mywindow.document.write(d);\n    setTimeout(function () {\n      resolve(mywindow);\n    }, 20);\n  });\n}\n\n$(document).ready(function ($) {\n  window.setTimeout(function () {\n    $('.alerts').slideUp();\n  }, 15000);\n  $('.alerts').on('click', function (e) {\n    $(this).slideUp();\n  });\n  $('#list-table-div').slimScroll({ start: 'bottom' });\n  $('#category-sidebar-menu').slimScroll({ width: '100%' });\n  $('.items').slimScroll({});\n});\n\nfunction posScreen() {\n  var wh = $(window).height(),\n    total_dh = $('#totaldiv').height(),\n    buttons_dh = $('.botbuttons').height(),\n    left_top_dh = $('#lefttop').outerHeight();\n  var items_dh = wh - 120,\n    list_table_dh = wh - 185 - left_top_dh - total_dh - buttons_dh;\n  $('#right-col').height(wh - 100);\n  $('.items').height(items_dh > 400 ? items_dh : 400);\n  $('#list-table-div').height(list_table_dh);\n}\n\nfunction printLine(str) {\n  var size = parseInt(Settings.char_per_line) - 4;\n  var len = str.length;\n  var res = str.split(':');\n  var newd = res[0];\n  for (i = 1; i < size - len; i++) {\n    newd += ' ';\n  }\n  newd += res[1];\n  return newd;\n}\n\n$(window).bind('resize', posScreen);\n\nfunction read_card() {}\n\n$.extend($.keyboard.keyaction, {\n  enter: function (base) {\n    if (base.$el.is('textarea')) {\n      base.insertText('\\r\\n');\n    } else {\n      base.accept();\n    }\n  },\n});\n\n$(document).ready(function () {\n  posScreen();\n  if (Settings.display_kb == 1) {\n    display_keyboards();\n  }\n  nav_pointer();\n  loadItems();\n  read_card();\n\n  $('.swipe')\n    .keypress(function (e) {\n      var TrackData = $(this).val() ? $(this).val() : '';\n      if (TrackData != '') {\n        if (e.keyCode == 13) {\n          e.preventDefault();\n          var p = new SwipeParserObj(TrackData);\n\n          if (p.hasTrack1) {\n            var CardType = null;\n            var ccn1 = p.account.charAt(0);\n            if (ccn1 == 4) CardType = 'Visa';\n            else if (ccn1 == 5) CardType = 'MasterCard';\n            else if (ccn1 == 3) CardType = 'Amex';\n            else if (ccn1 == 6) CardType = 'Discover';\n            else CardType = 'Visa';\n\n            $('#pcc_no').val(p.account).change();\n            $('#pcc_holder').val(p.account_name).change();\n            $('#pcc_month').val(p.exp_month).change();\n            $('#pcc_year').val(p.exp_year).change();\n            $('#pcc_cvv2').val('');\n            $('#pcc_type').select2('val', CardType);\n          } else {\n            $('#pcc_no').val('').change();\n            $('#pcc_holder').val('').change();\n            $('#pcc_month').val('').change();\n            $('#pcc_year').val('').change();\n            $('#pcc_cvv2').val('').change();\n            $('#pcc_type').val('').change();\n          }\n\n          $('#pcc_cvv2').focus();\n        }\n      }\n    })\n    .blur(function (e) {\n      $(this).val('');\n    })\n    .focus(function (e) {\n      $(this).val('');\n    });\n\n  $(document).on('blur', '#pcc_no', function () {\n    var cn = $(this).val();\n    var ccn1 = cn.charAt(0);\n    if (ccn1 == 4) CardType = 'Visa';\n    else if (ccn1 == 5) CardType = 'MasterCard';\n    else if (ccn1 == 3) CardType = 'Amex';\n    else if (ccn1 == 6) CardType = 'Discover';\n    else CardType = 'Visa';\n\n    $('#pcc_type').select2('val', CardType);\n  });\n\n  $('.modal').on('hidden.bs.modal', function () {\n    $(this).removeData('bs.modal');\n  });\n  $('#clearLS').click(function (event) {\n    bootbox.confirm(lang.r_u_sure, function (result) {\n      if (result == true) {\n        localStorage.clear();\n        location.reload();\n      }\n    });\n    return false;\n  });\n\n  if (Settings.focus_add_item != '') {\n    shortcut.add(\n      Settings.focus_add_item,\n      function () {\n        $('#add_item').focus();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.add_customer != '') {\n    shortcut.add(\n      Settings.add_customer,\n      function () {\n        $('#add-customer').trigger('click');\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.toggle_category_slider != '') {\n    shortcut.add(\n      Settings.toggle_category_slider,\n      function () {\n        $('[data-toggle=\"control-sidebar\"]').trigger('click');\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.cancel_sale != '') {\n    shortcut.add(\n      Settings.cancel_sale,\n      function () {\n        $('#reset').click();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.suspend_sale != '') {\n    shortcut.add(\n      Settings.suspend_sale,\n      function () {\n        $('#suspend').trigger('click');\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.print_order != '') {\n    shortcut.add(\n      Settings.print_order,\n      function () {\n        $('#print_order').click();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.print_bill != '') {\n    shortcut.add(\n      Settings.print_bill,\n      function () {\n        $('#print_bill').click();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.finalize_sale != '') {\n    shortcut.add(\n      Settings.finalize_sale,\n      function () {\n        $('#payment').trigger('click');\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.today_sale != '') {\n    shortcut.add(\n      Settings.today_sale,\n      function () {\n        $('#today_sale').click();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.open_hold_bills != '') {\n    shortcut.add(\n      Settings.open_hold_bills,\n      function () {\n        $('#opened_bills').trigger('click');\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n  if (Settings.close_register != '') {\n    shortcut.add(\n      Settings.close_register,\n      function () {\n        $('#close_register').click();\n      },\n      { type: 'keydown', propagate: false, target: document }\n    );\n  }\n});\n$.fn.focusToEnd = function () {\n  return this.each(function () {\n    var v = $(this).val();\n    $(this).focus().val('').val(v);\n  });\n};\n$.ajaxSetup({ cache: false, headers: { 'cache-control': 'no-cache' } });\n"]}